<div class="main">
	<header>
		<h1>Find the best testers in the world!</h1>
	</header>

	<section class="filters">
		<mat-form-field>
			<mat-label>Select country</mat-label>
			<mat-select [(ngModel)]="selectedCountries"
						(selectionChange)="countriesChanged($event)"
						multiple>
				<mat-option value="{{allOption}}">{{allOption}}</mat-option>
				<mat-option *ngFor="let country of countries$ | async"
							[value]="country">
					{{country}}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<mat-form-field>
			<mat-label>Select device</mat-label>
			<mat-select [(ngModel)]="selectedDevices"
						(selectionChange)="devicesChanged($event)"
						multiple>
				<mat-option value="{{allOption}}">{{allOption}}</mat-option>
				<mat-option *ngFor="let device of devices$ | async"
							[value]="device.id">
					{{device.description}}
				</mat-option>
			</mat-select>
		</mat-form-field>

		<button mat-raised-button
				color="primary"
				(click)="find()">Find
		</button>
	</section>

	<section class="results">
		<table mat-table [dataSource]="testers" class="mat-elevation-z8">

			<ng-container matColumnDef="firstName">
				<th mat-header-cell *matHeaderCellDef>Name</th>
				<td mat-cell *matCellDef="let element">{{element.firstName}}</td>
			</ng-container>

			<ng-container matColumnDef="lastName">
				<th mat-header-cell *matHeaderCellDef>Surname</th>
				<td mat-cell *matCellDef="let element">{{element.lastName}}</td>
			</ng-container>

			<ng-container matColumnDef="bugs">
				<th mat-header-cell *matHeaderCellDef>Bugs found</th>
				<td mat-cell *matCellDef="let element">{{element.bugs}}</td>
			</ng-container>

			<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
			<tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
		</table>
	</section>
</div>
